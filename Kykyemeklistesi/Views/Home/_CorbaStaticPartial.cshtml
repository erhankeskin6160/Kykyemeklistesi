@model IEnumerable<dynamic>
@{
    var chartId = "chart_" + Guid.NewGuid().ToString("N");
}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<canvas id="@chartId"></canvas>
<script>
    (function () {
        var corbaVerileri = @Html.Raw(System.Text.Json.JsonSerializer.Serialize(Model));
        const labels = corbaVerileri.map(x => x.CorbaAdi);
        const dataValues = corbaVerileri.map(x => x.TekrarSayisi);

        const renkler = [
            'rgba(231, 76, 60, 0.8)',
            'rgba(52, 152, 219, 0.8)',
            'rgba(46, 204, 113, 0.8)',
            'rgba(241, 196, 15, 0.8)',
            'rgba(155, 89, 182, 0.8)',
            'rgba(230, 126, 34, 0.8)'
        ];

        const borderRenkler = [
            'rgba(231, 76, 60, 1)',
            'rgba(52, 152, 219, 1)',
            'rgba(46, 204, 113, 1)',
            'rgba(241, 196, 15, 1)',
            'rgba(155, 89, 182, 1)',
            'rgba(230, 126, 34, 1)'
        ];

        const ctx = document.getElementById('@chartId');
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'Tekrar Sayısı',
                    data: dataValues,
                    backgroundColor: renkler.slice(0, dataValues.length),
                    borderColor: borderRenkler.slice(0, dataValues.length),
                    borderWidth: 2,
                    borderRadius: 8,
                    borderSkipped: false
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    title: {
                        display: true,
                        text: '🍲 En Çok Çıkan Çorbalar',
                        color: "#e74c3c",
                        font: {
                            size: 18,
                            weight: 'bold',
                            family: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"
                        },
                        padding: {
                            top: 10,
                            bottom: 20
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        padding: 12,
                        titleFont: {
                            size: 14,
                            weight: 'bold'
                        },
                        bodyFont: {
                            size: 13
                        },
                        cornerRadius: 8,
                        displayColors: true,
                        callbacks: {
                            label: function(context) {
                                return ' ' + context.parsed.x + ' kez çıktı';
                            }
                        }
                    }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        grid: {
                            display: true,
                            color: 'rgba(0, 0, 0, 0.05)'
                        },
                        ticks: {
                            color: '#34495e',
                            font: {
                                size: 12,
                                weight: '500'
                            },
                            stepSize: 1
                        }
                    },
                    y: {
                        grid: {
                            display: false
                        },
                        ticks: {
                            color: '#2c3e50',
                            font: {
                                size: 13,
                                weight: '600'
                            },
                            padding: 10
                        }
                    }
                },
                animation: {
                    duration: 1500,
                    easing: 'easeInOutQuart'
                }
            }
        });
    })();
</script>